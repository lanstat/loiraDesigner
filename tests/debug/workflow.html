<html>
<head>
    <script type="text/javascript" src="../../LoiraDesigner.js"></script>
    <style>
        #buttons{
            padding: 5px;
        }
        #buttons p{
            margin: 5px;
        }
        #buttons button{
            width: 100%;
        }
    </style>
</head>
<body>
<div style="width: 100%">
    <div id="buttons" style="width: 10%; float: left">
        <p>Comunes</p>
        <button id="actor">Proceso</button>
        <button id="assoc">Inicio</button>
        <button id="fin">Fin</button>
        <button id="direct">Data</button>
        <button id="gener">Decision</button>
        <button id="part">Partir</button>
    </div>
    <div id="_canvas" style="width: 85%; float: left">
    </div>
</div>
<script>
    window.onload = function(){
        Loira.Config.assetsPath = '../../assets/glyphs.png';

        var canvas = new Loira.Canvas('_canvas', {width:800, height:500});
        var relation = null;
        canvas.defaultRelation = 'Relation.DirectAssociation';

        document.getElementById('actor').addEventListener('click', function(){
            canvas.add(new Workflow.Process({x:150, y:150, text:'Cambiar de decision'}));
            canvas.renderAll();
        });

        document.getElementById('assoc').addEventListener('click', function(){
            canvas.add(new Workflow.StartTerminator({x:150, y:150}));
            canvas.renderAll();
        });
        document.getElementById('fin').addEventListener('click', function(){
            canvas.add(new Workflow.EndTerminator({x:150, y:150}));
            canvas.renderAll();
        });
        document.getElementById('direct').addEventListener('click', function(){
            canvas.add(new Workflow.Data({x:150, y:150, text:' '}));
            canvas.renderAll();
        });
        document.getElementById('gener').addEventListener('click', function(){
            canvas.add(new Workflow.Decision({x:150, y:150, text:' '}));
            canvas.renderAll();
        });
        document.getElementById('part').addEventListener('click', function(){
            relation.addPoint();
            canvas.renderAll();
        });

        canvas.on('relation:added', function(evt){
            relation = evt.selected;
            relation.text = 'asdasdasdasdasd';
        });

        canvas.on('relation:selected', function(evt){
            console.log('asdasdasdasdasdasdasdasd');
        });
    }
</script>
</body>
</html>
