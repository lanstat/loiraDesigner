<html>
	<head>
		<script type="text/javascript" src="../../LoiraDesigner.js"></script>
        <style>
        </style>
	</head>
	<body>
		<div>
            <canvas style="background-color:#aacccc" id="_canvas" width="800" height="500" tabindex="999"></canvas>
        </div>
        <button id="addObject">Agregar</button>
        <button id="setDirectRelation">Relacion directa</button>
		<script>
			window.onload = function(){
                Loira.Config.assetsPath = '../../assets/';

				var canvas = new Loira.Canvas('_canvas');

                console.log(canvas);
				var case1 = new UseCase.UseCase({x:100,y:200, text:'Registrar usuario'});
				var case2 = new UseCase.UseCase({x:500,y:200, text:'Iniciar sesion'});
                var actor = new Common.Actor({x:20, y:10, name:'Administrador'});
                
                canvas.on('relation:selected', function(event){
                   console.log(event.selected) 
                });

				canvas.add(case1, case2, actor);

                canvas.add(new Relation.Dependency({start:case1, end:case2}));

                //Se le da un timeout para q carguen las imagenes, se mantiene hasta encontrar otra forma
                //solo es en la primera renderizacion
				setTimeout(function(){
                    canvas.renderAll();
                }, 50);

                document.getElementById('addObject').addEventListener('click', function(){
                    var case1 = new UseCase.UseCase({x:140,y:140, text:'Mostrar evento'});
                    canvas.add(case1);
                    canvas.renderAll();
                });
                document.getElementById('setDirectRelation').addEventListener('click', function(){
                    canvas.nextRelation = new Relation.DirectAssociation();
                });

			}
		</script>
	</body>
</html>
